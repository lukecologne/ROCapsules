PART
{
    module = Part
    name = ROC-OrionCM
    author = Sobol, Vader111
    
    RSSROConfig = true
    RP0conf = true
    
    //  ============================================================================
    //  Model and Dimensions
    //  ============================================================================
    
    MODEL
    {
        model = ROCapsules/Assets/Sobol/OrionCM/model
        rotation = 0, 180, 0
    }
    
    INTERNAL
    {
        name = OrionCM_Internal
        scaleAll = 1.5, 1.5, 1.5
        kerbalScale = 1.5, 1.5, 1.5
        offset = 0.05,0.0,-0.8
    }
    
    scale = 1.0
    rescaleFactor = 1.0
    
    node_stack_top01 = 0.0, 1.83856, 0.0, 0.0, 1.0, 0.0, 2
    node_stack_top02 = 0.0, 1.83856, 0.0, 0.0, 1.0, 0.0, 2
    node_stack_top03 = 0.0, 1.83856, 0.0, 0.0, 1.0, 0.0, 2
    node_stack_bottom = 0.0, -0.61, 0.0, 0.0, -1.0, 0.0, 2

    // stack, srfAttach, allowStack, allowSrfAttach, allowCollision
    attachRules = 1,0,1,1,0
    bulkheadProfiles = size2
        
    //  ============================================================================
    //  Title, Description, Category, Techs
    //  ============================================================================
    
    title = Multi-Purpose Crew Vehicle "Orion"
    manufacturer = Lockheed Martin
    description = The Orion Multi-Purpose Crew Vehicle is an American spacecraft intended to carry a crew of four astronauts to destinations at or beyond low Earth orbit (LEO). Currently under development by NASA for launch on the Space Launch System, Orion is intended to facilitate human exploration of asteroids and of Mars and to retrieve crew or supplies from the International Space Station if needed.
    
    mass = 8.9461
    
    category = Pods
    subcategory = 0
    
    tags = Orion, SLS
    
    TechRequired = unlockParts
    cost = 150
    entryCost = 1
    
    vesselType = Ship
    stagingIcon = COMMAND_POD
    CrewCapacity = 6
    
    //  ============================================================================
    //  Thermo, Durability
    //  ============================================================================
        
    crashTolerance = 8
    maxTemp = 9000
    skinMaxTemp = 3000
    emissiveConstant = 0.85 // not too absorptive for reentry
    thermalMassModifier = 1.0
    skinMassPerArea = 2.0
    buoyancy = 1.1
    breakingForce = 250
    breakingTorque = 250
    
    fuelCrossfeed = true
    
    //  ============================================================================
    //  Modules and Resources
    //  ============================================================================
    
    MODULE 
    {
        name = RasterPropMonitorComputer
    }
    
    MODULE
    {
        name = ModuleCommand
        minimumCrew = 0
        RESOURCE
        {
            name = ElectricCharge
            rate = 1.895
        }
    }
    
    MODULE
    {
        name = ModuleSAS
        SASServiceLevel = 3
    }
    
    MODULE
    {
        name = ModuleLight
        lightName = spotlight
        useAnimationDim = true
        lightBrightenSpeed = 2.5
        lightDimSpeed = 2.5
        animationName = MPCV
        useResources = false
    }
    MODULE
    {
        name = ModuleLight
        lightName = spotlight
        useAnimationDim = true
        lightBrightenSpeed = 2.5
        lightDimSpeed = 2.5
        animationName = LightRight
        useResources = false
    }
    MODULE
    {
        name = ModuleLight
        lightName = spotlight
        useAnimationDim = true
        lightBrightenSpeed = 2.5
        animationName = LightLeft
        useResources = false
    }

    MODULE
    {
        name = AdjustableCoMShifter
        DescentModeCoM = 0, 0, -0.28
    }
    
    MODULE
    {
        name = ModuleScienceContainer
        reviewActionName = Review Stored Data
        storeActionName = Store Experiments
        storageRange = 2.0
    }
    
    MODULE
    {
        name = ModuleRCSFX
        stagingEnabled = False
        thrusterTransformName = RCSthruster
        thrusterPower = 0.4448222
        runningEffectName = running
        
        PROPELLANT
        {
            name = MMH
            ratio = 0.50
        }

        PROPELLANT
        {
            name = NTO
            ratio = 0.50
        }
        
        atmosphereCurve
        {
            key = 0 280.84
            key = 1 253.498
        }
    }
    
    MODULE
    {
        name = ModuleFuelTanks
        basemass = -1
        type = ServiceModule
        volume = 1050
        TANK
        {
            name = ElectricCharge
            amount = 43200
            maxAmount = 43200
        }
        TANK
        {
            name = Food
            amount = 245.7
            maxAmount = 245.7
        }
        TANK
        {
            name = Water
            amount = 162.4
            maxAmount = 162.4
        }
        TANK
        {
            name = Oxygen
            amount = 1777
            maxAmount = 24872.34
        }
        TANK
        {
            name = CarbonDioxide
            amount = 0
            maxAmount = 855
        }
        TANK
        {
            name = Waste
            amount = 0
            maxAmount = 22.34
        }
        TANK
        {
            name = WasteWater
            amount = 0
            maxAmount = 206.81
        }
        TANK
        {
            name = MMH
            amount = 45
            maxAmount = 45
        }
        TANK
        {
            name = NTO
            amount = 45
            maxAmount = 45
        }
        TANK
        {
            name = LithiumHydroxide
            amount = 31.5
            maxAmount = 31.5
        }
    }
    
    //  ============================================================================
    //  Comms
    //  ============================================================================
    
    MODULE:NEEDS[!RemoteTech]
    {
        name = ModuleDataTransmitter
        antennaType = DIRECT
        antennaPower = 64
        antennaCombinable = True
        antennaCombinableExponent = 2.0
        packetInterval = 1.0
        packetSize = 2.0
        requiredResource = ElectricCharge
        packetResourceCost = 0.04
        DeployFxModules = 0
    }
    
    MODULE:NEEDS[RemoteTech]
    {
        name = ModuleSPU
        IsRTCommandStation = False
        RTCommandMinCrew = 0
    }
    
    MODULE:NEEDS[RemoteTech]
    {
        name = ModuleRTAntenna
        ActionMode0Name = Deactivate Internal Antenna
        ActionMode1Name = Activate Internal Antenna
        IsRTActive = False
        Mode0OmniRange = 0
        Mode1OmniRange = 400000
        EnergyCost = 0.02
        DeployFxModules = 0

        TRANSMITTER
        {
            PacketInterval = 1.0
            PacketSize = 0.512
            PacketResourceCost = 0.02
        }
    }
    
    //  ============================================================================
    //  Animations and Textures
    //  ============================================================================
    
    EFFECTS
    {
        running
        {
            AUDIO
            {
                channel = Ship
                clip = sound_rocket_mini
                volume = 0.0 0.0
                volume = 0.1 0.0
                volume = 0.5 0.025
                volume = 1.0 0.1
                pitch = 0.0 0.75
                pitch = 1.0 1.5
                loop = true
            }
            MODEL_MULTI_PARTICLE
            {
                modelName = Squad/FX/Monoprop_small
                transformName = RCSthruster
                emission = 0.0 0.0
                emission = 0.1 0.0
                emission = 1.0 1.0
                speed = 0.0 0.8
                speed = 1.0 1.0
                localRotation = -90, 0, 0
            }
        }       
    }
}

//  ================================================================================
//  TAC Life Support Compatibility
//  ================================================================================

@PART[ROC-OrionCM]:FOR[RealismOverhaulTACLS]:NEEDS[TacLifeSupport]
{

    MODULE
    {
        name = TacGenericConverter
        converterName = CO2 LiOH Scrubber
        tag = Life Support
        StartActionName = Start CO2 Scrubber
        StopActionName = Stop CO2 Scrubber
        conversionRate = 3.0
        GeneratesHeat = False
        UseSpecialistBonus = False

        INPUT_RESOURCE
        {
            ResourceName = CarbonDioxide
            Ratio = 0.0058912100
            FlowMode = STAGE_PRIORITY_FLOW
        }

        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 0.010
        }

        INPUT_RESOURCE
        {
            ResourceName = LithiumHydroxide
            Ratio = 0.0000085683
            FlowMode = STAGE_PRIORITY_FLOW
        }
        
        OUTPUT_RESOURCE
        {
            ResourceName = Water
            Ratio = 0.0032924498
            DumpExcess = False
            FlowMode = STAGE_PRIORITY_FLOW
        }
        
        OUTPUT_RESOURCE
        {
            ResourceName = Waste
            Ratio = 0.0000257297
            DumpExcess = False
            FlowMode = STAGE_PRIORITY_FLOW
        }
    }
}